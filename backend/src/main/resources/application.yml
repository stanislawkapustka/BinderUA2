spring:
  application:
    name: binderua-backend
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:dev}

  datasource:
    url: ${DB_URL:jdbc:postgresql://localhost:5432/binderua}
    username: ${DB_USER:binderua}
    password: ${DB_PASSWORD:Stanik74!}
    driver-class-name: org.postgresql.Driver

  jpa:
    hibernate:
      ddl-auto: none
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
        use_sql_comments: true
    show-sql: ${SPRING_JPA_SHOW_SQL:false}

  flyway:
    enabled: true
    locations: classpath:db/migration
    baselineOnMigrate: true
    placeholders:
      admin_user_id: 1
      manager_user_id: 2
      employee_user_id: 3

  jackson:
    serialization:
      write-dates-as-timestamps: false
    default-property-inclusion: non_null

  messages:
    basename: messages/messages
    encoding: UTF-8
    fallback-to-system-locale: false

server:
  port: ${SERVER_PORT:8080}
  servlet:
    context-path: /
  compression:
    enabled: true
    min-response-size: 1024

binderua:
  jwt:
    secret: ${JWT_SECRET:YmluZGVydWFzZWNyZXRrZXljaGFuZ2VpbnByb2R1Y3Rpb25iaW5kZXJ1YXNlY3JldGtleWNoYW5nZWlucHJvZHVjdGlvbg==}
    expiration-ms: 86400000
  rates:
    pl-to-uah: ${PL_TO_UAH:10.5}
    monthly-hours: 160
  locale:
    default: PL
    supported: PL,EN,UA
  security:
    rate-limit-per-min: ${RATE_LIMIT_PER_MIN:100}
    password-min-length: 12
    password-require-uppercase: true
    password-require-lowercase: true
    password-require-digit: true
    password-require-special: true
    account-lockout-threshold: 5
    account-lockout-duration-minutes: 15
  cors:
    allowed-origins: ${CORS_ORIGINS:http://localhost:3000}
    allowed-methods: GET,POST,PUT,PATCH,DELETE,OPTIONS
    allowed-headers: Authorization,Content-Type,Accept-Language
    allow-credentials: true
    max-age: 3600

logging:
  level:
    root: ${LOG_LEVEL:INFO}
    com.timetracker: DEBUG
    org.springframework.security: DEBUG
    org.springframework.web: INFO
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

---
spring:
  config:
    activate:
      on-profile: dev
  jpa:
    show-sql: true
  datasource:
    url: jdbc:postgresql://localhost:5432/binderua
    username: binderua
    password: Stanik74!

binderua:
  jwt:
    secret: ZGV2c2VjcmV0a2V5bm90Zm9ycHJvZHVjdGlvbmRldnNlY3JldGtleW5vdGZvcnByb2R1Y3Rpb24=

logging:
  level:
    root: INFO
    com.timetracker: DEBUG
    org.springframework.security: DEBUG

---
spring:
  config:
    activate:
      on-profile: prod
  jpa:
    show-sql: false

binderua:
  jwt:
    secret: ${JWT_SECRET:must-set-in-production}
  cors:
    allowed-origins: ${CORS_ORIGINS:http://localhost:3000,http://localhost:3001,http://localhost:3002}

server:
  compression:
    enabled: true
    min-response-size: 1024
  servlet:
    session:
      cookie:
        secure: true
        http-only: true
        same-site: lax

logging:
  level:
    root: WARN
    com.timetracker: INFO
